/*!
 * hx-storage v1.0.2
 * (c) 2018-2021 ljh
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).hxStorage=t()}(this,(function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={},s=new(function(){function e(){r(this,e),u(this,"_is_cache",!0),Object.defineProperty(this,"length",{get:function(){return Object.keys(a).length}}),Object.defineProperty(this,"data",{get:function(){return Object.assign({},a)}})}return i(e,[{key:"getItem",value:function(e){return a[e]}},{key:"setItem",value:function(e,t){if(!e)throw new Error("Key values cannot be null");return a[e]=t,!0}},{key:"removeItem",value:function(e){return!!a[e]&&(delete a[e],!0)}},{key:"clear",value:function(){return a={},!0}},{key:"key",value:function(e){var t=Object.keys(a);return void 0!==t[e]?t[e]:null}}]),e}()),c="undefined"!=typeof window?window:global||{},f="$@",l={number:{save:function(e){return e},parse:function(e){return Number.parseFloat(e)}},object:{save:function(e){return JSON.stringify(e)},parse:function(e){return JSON.parse(e)}},undefined:{save:function(e){return e},parse:function(){}},default:{save:function(e){return e},parse:function(e){return e}}};function p(e){return l[e]||l.default}var y={local:c.localStorage,session:c.sessionStorage,cache:s};function b(e){var t;return null!==(t=y[e])&&void 0!==t?t:s}var g=function(){function e(t){r(this,e),e.storage=b(t)}return i(e,[{key:"get",value:function(t){var n=e.storage.getItem(e.options.namespace+t);if(n){var r=n.split(f),o=Date.now();if(r.length>2&&r[2]<o)return this.remove(t),null;var i=decodeURIComponent(r[1]);return p(r[0]).parse(i)}return null}},{key:"set",value:function(t,r,o){if((o=Object.assign({expires:0,encode:!0},o)).expires&&"number"!=typeof o.expires)throw new Error("The Expires setting must be a number");var i=n(r),u=p(i),a=o.encode?encodeURIComponent(u.save(r)):u.save(r);if(o.expires<=0)r=i+f+a;else{var s=24*o.expires*60*60*1e3+(new Date).getTime();r=i+f+a+f+s}return e.storage.setItem(e.options.namespace+t,r),!0}},{key:"clear",value:function(){return e.storage.clear(),!0}},{key:"remove",value:function(t){return e.storage.removeItem(e.options.namespace+t),!0}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.storage&&-1===["local","session","cache"].indexOf(t.storage))throw new Error("hx-storage: storage "+t.storage+" is not supported");e.options=Object.assign(e.options,t);var n=e.options.storage||"local";return e.storage=b(n),!0}},{key:"list",value:function(){var n=e.storage;return null!=n&&n._is_cache?t({},n.data):t({},n)}}]),e}();return u(g,"storage",null),u(g,"options",{namespace:"",storage:"local"}),new g("local")}));
