!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).hxStorage=n()}(this,(function(){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var o="$@",r={number:{save:function(e){return e},parse:function(e){return Number.parseFloat(e)}},object:{save:function(e){return JSON.stringify(e)},parse:function(e){return JSON.parse(e)}},undefined:{save:function(e){return e},parse:function(){}},default:{save:function(e){return e},parse:function(e){return e}}};function a(e){return r[e]||r.default}var i=function(){function t(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,i,s;return r=t,i=[{key:"get",value:function(e){var n=t.storage.getItem(t.options.namespace+e);if(n){var r=n.split(o),i=Date.now();if(r.length>2&&r[2]<i)return this.remove(e),null;var s=decodeURIComponent(r[1]);return a(r[0]).parse(s)}return null}},{key:"set",value:function(n,r,i){if((i=Object.assign({expires:0,encode:!0},i)).expires&&"number"!=typeof i.expires)throw new Error("The Expires setting must be a number");var s=e(r),u=a(s),f=i.encode?encodeURIComponent(u.save(r)):u.save(r);if(i.expires<=0)r=s+o+f;else{var l=24*i.expires*60*60*1e3+(new Date).getTime();r=s+o+f+o+l}t.storage.setItem(t.options.namespace+n,r)}},{key:"clear",value:function(){t.storage.clear()}},{key:"remove",value:function(e){t.storage.removeItem(t.options.namespace+e)}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.options=Object.assign(t.options,e),t.storage="session"===t.options.storage?_global.sessionStorage:_global.localStorage}}],i&&n(r.prototype,i),s&&n(r,s),t}();return t(i,"storage",_global.localStorage),t(i,"options",{namespace:"",storage:"local"}),new i}));
